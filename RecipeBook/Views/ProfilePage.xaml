<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:converters="clr-namespace:RecipeBook.Converters"
             x:Class="RecipeBook.Views.ProfilePage"
             Title="Profile">

    <ContentPage.Resources>
        <converters:StringToBoolConverter x:Key="StringToBoolConverter" />
        <converters:BoolToVisibilityConverter x:Key="BoolToVisibilityConverter" />
    </ContentPage.Resources>

    <ScrollView>
        <VerticalStackLayout Padding="20" Spacing="15">


            <Label Text="{Binding Email}" 
                   FontSize="18" 
                   HorizontalOptions="Center" 
                   Margin="0,10,0,20" />

            <!-- Profile Information -->
            <Grid RowDefinitions="Auto,Auto,Auto" ColumnDefinitions="Auto,*">
                <!-- First Name -->
                <Label Text="First Name:" 
                       Grid.Row="0" Grid.Column="0" 
                       FontAttributes="Bold" 
                       VerticalOptions="Center" />

                <Label Text="{Binding FirstName}" 
                       Grid.Row="0" Grid.Column="1" 
                       IsVisible="{Binding IsEditing, Converter={StaticResource BoolToVisibilityConverter}, ConverterParameter=true}" 
                       VerticalOptions="Center" />

                <Entry Text="{Binding FirstName}" 
                       Grid.Row="0" Grid.Column="1" 
                       IsVisible="{Binding IsEditing}" 
                       Placeholder="Enter your first name" />

                <!-- Last Name -->
                <Label Text="Last Name:" 
                       Grid.Row="1" Grid.Column="0" 
                       FontAttributes="Bold" 
                       VerticalOptions="Center" />

                <Label Text="{Binding LastName}" 
                       Grid.Row="1" Grid.Column="1" 
                       IsVisible="{Binding IsEditing, Converter={StaticResource BoolToVisibilityConverter}, ConverterParameter=true}" 
                       VerticalOptions="Center" />

                <Entry Text="{Binding LastName}" 
                       Grid.Row="1" Grid.Column="1" 
                       IsVisible="{Binding IsEditing}" 
                       Placeholder="Enter your last name" />

                <!-- Email -->
                <Label Text="Email:" 
                       Grid.Row="2" Grid.Column="0" 
                       FontAttributes="Bold" 
                       VerticalOptions="Center" />

                <Label Text="{Binding Email}" 
                       Grid.Row="2" Grid.Column="1" 
                       VerticalOptions="Center" />
            </Grid>

            <!-- Action Buttons -->
            <VerticalStackLayout Spacing="10" Margin="0,20,0,0">
                <!-- Edit Profile Button -->
                <Button Text="Edit Profile" 
                        Command="{Binding EditProfileCommand}" 
                        IsVisible="{Binding IsEditing, Converter={StaticResource BoolToVisibilityConverter}, ConverterParameter=true}" 
                        BackgroundColor="#5B8C5A" />

                <!-- Save Profile Button -->
                <Button Text="Save Profile" 
                        Command="{Binding SaveProfileCommand}" 
                        IsVisible="{Binding IsEditing}" 
                        BackgroundColor="#5B8C5A" />

                <!-- Sign Out Button -->
                <Button Text="Sign Out" 
                        Command="{Binding SignOutCommand}" 
                        BackgroundColor="#C75450" />
            </VerticalStackLayout>

            <!-- Error Message -->
            <Label Text="{Binding ErrorMessage}" 
                   TextColor="Red" 
                   IsVisible="{Binding ErrorMessage, Converter={StaticResource StringToBoolConverter}}" />
        </VerticalStackLayout>
    </ScrollView>
</ContentPage>