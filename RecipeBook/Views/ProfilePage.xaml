<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="RecipeBook.Views.ProfilePage"
             Title="{Binding Title}">
    <Grid RowDefinitions="Auto,*,Auto" Padding="20">
        <!-- Authenticated User View -->
        <VerticalStackLayout Grid.Row="1" Spacing="20" VerticalOptions="Center" IsVisible="{Binding IsAuthenticated}">
            <Label Text="Your Profile" FontSize="24" HorizontalOptions="Center" FontAttributes="Bold" Margin="0,0,0,20"/>

            <Frame Padding="20" Margin="0,0,0,20">
                <VerticalStackLayout Spacing="10">
                    <Label Text="Email" FontAttributes="Bold" />
                    <Label Text="{Binding User.Email}" />
                </VerticalStackLayout>
            </Frame>

            <Button Text="Logout" Command="{Binding LogoutCommand}" />
        </VerticalStackLayout>

        <!-- Unauthenticated User View -->
        <VerticalStackLayout Grid.Row="1" Spacing="20" VerticalOptions="Center" IsVisible="{Binding IsAuthenticated, Converter={StaticResource InverseBooleanConverter}}">
            <Label Text="Recipe Book" FontSize="32" HorizontalOptions="Center" FontAttributes="Bold" Margin="0,0,0,20"/>

            <Label Text="Please login or register to continue" FontSize="18" HorizontalOptions="Center" Margin="0,0,0,20"/>

            <Button Text="Login" Command="{Binding LoginCommand}" Margin="0,0,0,10" />

            <Button Text="Register" Command="{Binding RegisterCommand}" />
        </VerticalStackLayout>

        <ActivityIndicator Grid.RowSpan="3" IsRunning="{Binding IsBusy}" IsVisible="{Binding IsBusy}" HorizontalOptions="Center" VerticalOptions="Center" />
    </Grid>
</ContentPage>